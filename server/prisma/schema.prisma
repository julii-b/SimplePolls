generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model answers {
  id                     Int                      @id @default(autoincrement())
  pollId                Int
  answerText            String
  createdAt             DateTime                 @default(now()) @db.Timestamptz(6)
  polls                  polls                    @relation(fields: [pollId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  answers_given_by_users answers_given_by_users[]

  @@index([pollId], map: "idx_answers_poll_id")
}

model answers_given_by_users {
  userId    Int
  answerId  Int
  createdAt DateTime @default(now()) @db.Timestamptz(6)
  answers   answers  @relation(fields: [answerId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users     users    @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([userId, answerId])
  @@index([answerId], map: "idx_answers_given_by_users_answer_id")
}

model polls {
  id            Int       @id @default(autoincrement())
  ownerId      Int
  questionText String
  createdAt    DateTime  @default(now()) @db.Timestamptz(6)
  answers       answers[]
  users         users     @relation(fields: [ownerId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([createdAt], map: "idx_polls_created_at")
  @@index([ownerId], map: "idx_polls_owner_id")
}

model users {
  id                     Int                      @id @default(autoincrement())
  userToken              String                   @unique
  createdAt              DateTime                 @default(now()) @db.Timestamptz(6)
  answers_given_by_users answers_given_by_users[]
  polls                  polls[]

  @@index([createdAt], map: "idx_users_created_at")
}
